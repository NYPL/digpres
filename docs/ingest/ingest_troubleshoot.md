---
layout: page
title: Ingest Issues Troubleshooting
parent: Ingest
nav_order: 10
---

# Ingest Issues Troubleshooting

{: .no_toc }
&nbsp;
{: .no_toc .text-delta }

1. TOC
{:toc}

Ingesting content into Preservica encounters issues from time to time.
Digital Preservation program uses below methods to understand the cause and
resolve them.

## How are issues spotted?

There are a couple of ways that we check if the ingest process encounters any blockage.

* Exception log file: "Exception log" is a plaintext file generated by the ingest script,
  and it lists the file(s) that are not included in the package staged for ingest.
  This is the first file to check, in case there are files not included in the package.

* Workflow status on the Preservica website ingest monitor: after logging into Preservica,
  click Ingest > Monitor, and the screen will show all the processes. A workflow status
  indicates whether the ingest was successful. If the ingest workflow completed
  successfully, there will be a green check mark for the package. If the workflow has
  issue(s), there will be an orange check mark. On the same page, there is a section that
  lists all the messages, "Info", "Warning", "Error". Successful workflows can sometimes
  include "warning" and "error" messages for some issues, such as filename encoding errors.
  How we navigate what the actual causes are will be introduced in the next section.

## How we figure out what the issues stem from?

For files listed in the "Exception log", we review them individually. These exceptions
are defined in the ingest script, and they catch files with unexpected extensions and
incorrect file naming conventions. For instance, our program expects the Born Digital
Archives metadata file to be a comma-separated values or tab-separated values file.
Therefore, the expected extensions are .CSV or .TSV. If a metadata file that has a
different file extension is found in the package, it will not be included in ingest
package, and will be listed in the Exception log.

For unsuccessful ingest workflows, they can result from various reasons. Preservica is
format-agnostic, meaning it does not restrict ingested content by its file format.
It also does not read into file content much, except for generating checksum and
virus check. However, Preservica reads filenames and uses them to create assets metadata.
Therefore, when there are unsuccessful ingest processes, they usually result from issues
of the filename or during the virus checking step.

* Filename encoding issues: for filename encoding issues, we use the command line software,
  xxd, to investigate any hidden characters in the filename. For instance, to see the filename's
  hex value of a file called, "digital_preservation.docx", we can use this command
  in the terminal:

    ```sh
    echo digital_preservation.docx | xxd
    ```

    * echo is a unix/linux command line tool that displays lines of texts or strings that are
      passed as argument

  This command prints out the hex data of the filename. Hex is short for hexadecimal. Hexadecimal
  data represents binary data using the base 16 number system, and it allows us to see the filename
  in a more granular level, including hidden characters.

  In two collections, our program discovered files with hidden characters, `\x7f`, in their filenames.
  After some research, we found out `\x7f` means `DEL`, delete in ASCII characters.

* Filename having characters unaccepted by Preservica: in some cases, filenames have characters that
  Preservica does not accept. This is because Preservica uses XML to store and transact metadata, and
  XML does not accept some characters, including `&`, `<`, `>`, `"`, `'`.

* Virus detected in the file: Preservica scans for computer virus with ClamAV, an open source antivirus
  software, before ingesting the package. Therefore, if there is any virus detected in one or more
  files in one package, the package will not be ingested, and the ingest workflow will be halted.
